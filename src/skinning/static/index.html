<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="static/main.css" />
    <title>WebGL - Cloth Simulation</title>
    <style>
      /* Fixed Control Panel Styles */
      .control-panel {
        position: absolute;
        top: 0;
        right: 0;
        width: 320px;
        height: 800px; /* Match the canvas height */
        background-color: #2a5964; /* Turquoise color */
        color: #fff;
        padding: 15px;
        box-sizing: border-box;
        overflow-y: auto;
        font-family: Arial, sans-serif;
        z-index: 10;
      }
      
      .control-panel h3 {
        margin-top: 0;
        margin-bottom: 20px;
        text-align: center;
        border-bottom: 1px solid #4a7983;
        padding-bottom: 10px;
        color: white;
      }
      
      .control-group {
        margin-bottom: 20px;
        background-color: rgba(255, 255, 255, 0.1);
        padding: 12px;
        border-radius: 6px;
      }
      
      .control-group h4 {
        margin-top: 0;
        margin-bottom: 15px;
        color: white;
        font-size: 1.1em;
      }
      
      .control-group h5 {
        margin-top: 15px;
        margin-bottom: 10px;
        color: white;
        font-size: 0.9em;
      }
      
      .control-group label {
        display: block;
        margin-bottom: 8px;
        color: white;
        font-weight: bold;
      }
      
      .control-panel select,
      .control-panel button {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        background-color: #1d3f47;
        color: #fff;
        border: 1px solid #4a7983;
        border-radius: 4px;
        cursor: pointer;
      }
      
      .control-panel button {
        background-color: #3a6772;
        font-weight: bold;
        transition: background-color 0.3s;
      }
      
      .control-panel button:hover {
        background-color: #4a7983;
      }
      
      .slider-container {
        margin-top: 10px;
        margin-bottom: 12px;
      }
      
      .slider-container label {
        display: block;
        margin-bottom: 5px;
        font-weight: normal;
      }
      
      .slider-container input[type="range"] {
        width: 85%;
        vertical-align: middle;
        background-color: #1d3f47;
      }
      
      .slider-container span {
        display: inline-block;
        width: 40px;
        text-align: right;
        margin-left: 8px;
      }
      
      .checkbox-label {
        display: flex !important;
        align-items: center;
        font-weight: normal !important;
      }
      
      .checkbox-label input[type="checkbox"] {
        margin-right: 8px;
        width: 18px;
        height: 18px;
      }
      
      .info-panel {
        margin-top: 30px;
        padding: 15px;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 6px;
      }
      
      .info-panel h4 {
        margin-top: 0;
        margin-bottom: 10px;
        color: white;
      }
      
      .info-panel ul {
        margin: 0;
        padding-left: 20px;
      }
      
      .info-panel li {
        margin-bottom: 8px;
        font-size: 0.9em;
      }
      
      /* Critical: Fixed canvas positioning */
      .container {
        position: relative;
        width: 1120px; /* Total width: 800px (simulation) + 320px (control panel) */
        height: 800px;
      }
      
      /* Keep canvas original size, don't resize */
      #glCanvas, #textCanvas {
        position: absolute;
        top: 0;
        left: 0;
        /* Don't set width/height here - keep the original attributes */
      }
      
      /* Custom controls container styling */
      #custom-controls-container {
        max-height: 600px;
        overflow-y: auto;
      }
      
      #custom-controls-container .control-group {
        margin-bottom: 15px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <canvas id="glCanvas" class="card" width="800" height="800">
        Your browser does not support HTML5
      </canvas>
      <canvas id="textCanvas" width="800" height="800">
        Your browser does not support HTML5
      </canvas>
      
      <!-- Control Panel -->
      <div id="controlPanel" class="control-panel">
        <h3>Cloth Simulation Controls</h3>
        
        <div class="control-group">
          <label for="simulation-select">Simulation Type:</label>
          <select id="simulation-select">
            <option value="0" selected>Sphere Drop Test</option>
            <option value="1">Cotton Basic</option>
            <option value="2">Silk Drape</option>
            <option value="3">Leather Stiff</option>
            <option value="4">Rubber Stretch</option>
            <option value="5">Wind Test</option>
            <option value="6">Centerpiece</option>
            <option value="7">Progressive Mesh Test</option>
            <option value="8">Custom Parameters</option>
          </select>
        </div>
        
        <!-- Container for custom controls (will be populated by JavaScript) -->
        <div id="custom-controls-container" style="display: none;">
          <!-- Custom control elements will be created dynamically -->
        </div>
        
        <div class="control-group">
          <button id="reset-simulation">Reset Simulation</button>
        </div>
        
        <div class="info-panel">
          <h4>Controls:</h4>
          <ul>
            <li>Left-click + drag: Rotate camera</li>
            <li>Right-click + drag: Zoom camera</li>
            <li>Arrow keys: Pan camera</li>
            <li>Left-click on particle: Drag particle</li>
            <li>Shift + click: Pin/unpin particle</li>
            <li>
              'V' key: Cycle visualization modes
              <ol>
                <li>Wireframe</li>
                <li>Particle</li>
                <li>Spring Network</li>
              </ol>
            </li>
            <li>
              'P' key: Pause/Play Simulation (make sure simulation type not highlighted)
            </li>
          </ul>
        </div>
      </div>
    </div>
    <br />
    <script type="module" src="./index.js"></script>
    <br />
  </body>
</html>